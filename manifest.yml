app:
  id: ari:cloud:ecosystem::app/0614da52-970a-45d5-b6d5-8eb9c4b01227
  runtime:
    name: nodejs20.x

modules:
  jira:customFieldType:
    - key: multi-cascade-type
      name: Dynamic Multi-level Cascade Type
      description: A dynamic cascading dropdown field that can be configured with JSON data
      type: string
      formatter:
        expression: "value ? Object.values(value).filter(v => v).join(' > ') : ''"
      edit:
        resource: ui
        experience:
          - issue-view
          - issue-create
          - issue-transition
          - issue-panel
      resolver:
        function: field-resolver
  jira:globalPage:
    - key: cascading-admin-panel
      title: Cascading Configuration
      resource: admin-ui
      resolver:
        function: admin-resolver

  function:
    - key: field-resolver
      handler: index.fieldHandler
    - key: admin-resolver
      handler: index.adminHandler

resources:
  - key: ui
    path: static/dist
  - key: admin-ui
    path: static/admin-dist

permissions:
  scopes:
    - storage:app
    - read:jira-work
    - write:jira-work
    - manage:jira-configuration
  content:
    styles:
      - 'unsafe-inline'
    scripts:
      - 'unsafe-inline'
      - 'unsafe-inline'